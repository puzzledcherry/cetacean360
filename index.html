<!DOCTYPE html>
<html>
    <head>
        <!-- metadata is information about data-->
        <!-- specified character encoding, reccomended to use utf-8 -->
        <meta charset="utf-8">
        <!-- defining the area of the window in which content is seen -->
        <meta name="viewport" content="initial-scale=1,maximum-scale=1,user-scalable=no">
        <!-- link to external resource, css style sheet used for map styling-->
        <link href="https://api.mapbox.com/mapbox-gl-js/v2.14.1/mapbox-gl.css" rel="stylesheet">
        <!--defining the external script file where things are defined so we can use them here -->
        <script src="https://api.mapbox.com/mapbox-gl-js/v2.14.1/mapbox-gl.js"> </script>
        
        <!--styles are in css-->
        <style>
            /* styling everything in a body */
            body { margin: 0; 
                   padding: 0; }

            /* styling the map div specifically*/
            #map { position: absolute; 
                   top: 0; 
                   bottom: 0; 
                   width: 100%; }
        </style>
    </head>
    
    <body>
        <!-- map div-->
        <div id = "map"> </div>
        <!-- script is in javascript-->
        <script>
            // used to access mapbox functionalities
            mapboxgl.accessToken = 'pk.eyJ1IjoicHV6emxlZGNoZXJyeSIsImEiOiJjbHBqenY1c2owNHI4MmpzZGJtdXN6OTJyIn0.mXagBlsNigKA9zr2C7BDXw';
            // initialize new map object
            const map = new mapboxgl.Map({ 
                container: 'map',                               // where the map will be rendered, in this case the map div
                style: 'mapbox://styles/puzzledcherry/clpu0q5gy00fo01r7h8wu5e71',    // styling of the map
                center: [-74.5, 100],                           // the geographic centring of the map
                zoom: 1                                         // how far in/out the map should be zoomed
            });
            
            // set event listener for when the map loads
            map.on('load', () => {
                // add whale api as a source 
                map.addSource ('acartia', {
                    type: 'json', 
                    data: 'https://acartia.io/api/v1/sightings/current'
                });

                // !!! need to convert json to geojson though
                map.addSource('acartia_geo', {
                    type: 'geojson', 
                    data: 'https://acartia.io/api/v1/sightings/current'
                });
                
                // add a new map layer with all the points as circles
                map.addLayer ({
                    'id': 'acartia-layer', 
                    'type': 'circle', 
                    'source': 'acartia', 
                    'paint': {
                        'circle-radius': 4, 
                        'circle-stroke-width': 2, 
                        'circle-color': 'red', 
                        'circle-stoke-color': 'white'
                    }
                });
            });
            
        </script>
    </body>
</html>
