name: c360 refresh
on: 
    schedule:
        - cron: "* * * 1 *" # - cron: "*/5 * * * *"
    workflow_dispatch:

jobs:
    run_app:
        runs-on: ubuntu-latest
        
        steps:
        - name: check code
          uses: actions/checkout@v2

        - name: set up python
          uses: actions/setup-python@v2
          with:
            python-version: '3.x'

        - name: install dependencies
          run: |
            pip install pandas
            pip install plotly
            pip install chart_studio
            pip install requests
            pip install datetime
        
        - name: run c360
          env: 
            TOKEN: ${{ secrets.TOKEN }} 
            MAPBOX_TOKEN: ${{ secrets.MAPBOX_TOKEN }}
            PLOTLY_TOKEN: ${{ secrets.PLOTLY_TOKEN }}
          run: python app.py


